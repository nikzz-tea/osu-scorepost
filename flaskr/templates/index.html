<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>HTML 5 Boilerplate</title>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='style.css') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static',filename='osu_scorepost_generator_logo.ico') }}" />
    <script src="https://kit.fontawesome.com/a5b2cefb49.js" crossorigin="anonymous" async></script>
    <script async>

      function copyToClipboard() {
        scoreTitleText = document.getElementById('generated_title').innerText;
        navigator.clipboard.writeText(scoreTitleText);

        notif = document.getElementById('copy_notification')
        notif.classList.add('show');
        notif.classList.add('fadeout');
        notif.addEventListener('animationend', () => {
            notif.classList.remove('show', 'fadeout');
        }, { once: true });
      }

      function loading() {
        setTimeout(function(){
          loading_element = document.getElementById('loading')
          loading_element.innerText = "Loading..."
          document.getElementById('submit_button').disabled = true;
        }, 100)

      }
      if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
      }
    </script>
  </head>
  <body>
    <div class="top_navbar">

      <h1 class="site_title">
        <img class="site_logo" src="/static/osu_scorepost_generator_logo.png">
        osu!scorepost
      </h1>

      <div class="links_container">
        <a class="reddit" target="_blank" href="https://www.reddit.com/r/osugame/submit/?type=IMAGE">
          <i class="fa-brands fa-reddit"></i>
          Open Reddit
        </a>
        <a class="github" target="_blank" href="https://github.com/wesleyyxie/osu-Scorepost-Generator">
          <i class="fa-brands fa-github"></i>
          Github
        </a>
        <a class="osu_profile" target="_blank" href="https://osu.ppy.sh/users/26080649">
          <i class="fa-regular fa-circle-dot"></i>
          osu! Profile
        </a>
      </div>

    </div>


    <!-- generator starts here -->
    <div class="generator_container">
      <form class="score_input" action="/" method="POST">
        <div class="input_container">
          <input class="url_input" type="text" name="content" id="content" placeholder="Score URL e.g. https://osu.ppy.sh/scores/000000000">
          <button class="submit_button" id="submit_button fa-solid fa-arrow-right" onclick="loading()" type="submit">
            <i class="fa-solid fa-angle-right" data-fa-transform="down-40"></i>
          </button>
        </div>
        <div class="checkbox_container">
          <input class="get_screenshot" name="checkbox" type="checkbox" id="checkbox" value="get screenshot">
          <label for="checkbox" class="checkbox_label">Get score screenshot</label>
        </div>
      </form>

      <p class="generated_title" id="generated_title">
        {{ score_title }}
        <button class="copy_button" onclick="copyToClipboard()">
          <span style="color: white;" class="copy_button_style">
            <i class="fa-solid fa-clipboard"></i>
          </span>
        </button>
      </p>
      <div class="image_container">
        <img class="score_image" src="{{ image_src }}">
      </div>
      <p class = "results" id="loading">{{ results }}</p>
      <div id="copy_notification" class="notif">Copied to clipboard</div>
    </div>
  </body>
</html>